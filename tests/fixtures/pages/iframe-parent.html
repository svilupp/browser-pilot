<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Iframe Parent Test Page</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; }
    .section { margin-bottom: 20px; }
    iframe { border: 2px solid #2196f3; border-radius: 4px; }
    .result { margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px; }
    button { padding: 10px 20px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
    button:hover { background: #1976d2; }
  </style>
</head>
<body>
  <h1>Iframe Parent Test Page</h1>

  <div class="section">
    <h2>Main Frame Controls</h2>
    <button id="main-btn" data-testid="main-button">Main Frame Button</button>
    <div id="main-result" class="result" style="display: none;"></div>
  </div>

  <div class="section">
    <h2>Same-Origin Iframe</h2>
    <iframe
      id="child-frame"
      data-testid="child-frame"
      src="iframe-child.html"
      width="400"
      height="300"
      title="Child Frame">
    </iframe>
  </div>

  <div class="section">
    <h2>Nested Iframe Container</h2>
    <iframe
      id="nested-frame"
      data-testid="nested-frame"
      src="iframe-nested.html"
      width="450"
      height="350"
      title="Nested Frame Container">
    </iframe>
  </div>

  <div class="section">
    <h2>Communication Result</h2>
    <div id="message-result" class="result" style="display: none;"></div>
  </div>

  <script>
    document.getElementById('main-btn').addEventListener('click', () => {
      document.getElementById('main-result').style.display = 'block';
      document.getElementById('main-result').textContent = 'Main frame button clicked!';
    });

    // Listen for messages from iframes
    window.addEventListener('message', (event) => {
      if (event.data && event.data.type === 'iframe-action') {
        document.getElementById('message-result').style.display = 'block';
        document.getElementById('message-result').textContent = `Received from iframe: ${event.data.message}`;
      }
    });
  </script>
</body>
</html>
